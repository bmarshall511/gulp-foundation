"use strict";

(function ($) {
  $(function () {
    var $submitConfig = $('#importConfig'),
        $configSavingStatus = $('#configSavingStatus'),
        $configImportStatus = $('#configImportStatus'),
        $importBlock = $('#importBlock'),
        $generateTheme = $('#generateChildTheme'),
        $childThemeStatus = $('#childThemeStatus'); // Genearte child theme

    $generateTheme.click(function (e) {
      e.preventDefault();
      var $themeName = $('#childThemeName');
      var $textDomain = $('#childThemeTextDomain');
      var $themeDesc = $('#childThemeDesc');
      var $themeURL = $('#childThemeURL');
      var $themeTags = $('#childThemeTags');
      var data = new FormData();
      data.append('action', 'foundation_generate_theme');
      data.append('theme_name', $themeName.val());
      data.append('text_domain', $textDomain.val());
      data.append('theme_desc', $themeDesc.val());
      data.append('theme_url', $themeURL.val());
      data.append('theme_tags', $themeTags.val());
      data.append('security', FOUNDATION.nonce);
      $themeName.prop('disabled', true);
      $textDomain.prop('disabled', true);
      $themeDesc.prop('disabled', true);
      $themeURL.prop('disabled', true);
      $themeTags.prop('disabled', true);
      $generateTheme.prop('disabled', true);
      $childThemeStatus.removeClass('error').removeClass('success').html('');
      fetch(ajaxurl, {
        method: 'POST',
        body: data
      }).then(function (response) {
        return response.json();
      }).then(function (response) {
        $themeName.prop('disabled', false);
        $textDomain.prop('disabled', false);
        $themeDesc.prop('disabled', false);
        $themeURL.prop('disabled', false);
        $themeTags.prop('disabled', false);
        $generateTheme.prop('disabled', false);

        if (response.error.length) {
          $childThemeStatus.addClass('error');
          response.error.forEach(function (errorMsg) {
            $childThemeStatus.append('<p><strong>' + errorMsg + '</strong></p>');
          });
        } else if (response.success.length) {
          $childThemeStatus.addClass('success');
        }

        if (response.success.length) {
          response.success.forEach(function (successMsg) {
            $childThemeStatus.append('<p><strong>' + successMsg + '</strong></p>');
          });
        }
      });
    }); // Import configuration

    $submitConfig.click(function (e) {
      e.preventDefault();
      var $configData = $('#configData');
      $submitConfig.prop('disabled', true);
      $configData.prop('disabled', true);
      $configSavingStatus.html('Please wait, importing configuration...');
      $configImportStatus.html('');
      var data = new FormData();
      data.append('action', 'foundation_import_configuration');
      data.append('data', $configData.val());
      data.append('security', FOUNDATION.nonce);
      fetch(ajaxurl, {
        method: 'POST',
        body: data
      }).then(function (response) {
        return response.json();
      }).then(function (response) {
        if (response.error) {
          switch (response.error) {
            case 'invalid_data':
              $configImportStatus.html('<span style="color:#ca4a1f;font-weight:bold">The configuration code entered is invalid. Please try again.</span>');
              break;
          }
        } else {
          for (var property in response.updated) {
            $configImportStatus.append('<strong>' + response.updated[property] + '</strong> (' + property + ') <span style="color:#46b450">Updated</span><br>');
          }

          $configImportStatus.append('<br><a href="' + FOUNDATION.admin_url + 'admin.php?page=configuration">Refresh</a> the page to view the updates.');
          $importBlock.remove();
        }

        $submitConfig.prop('disabled', false);
        $configData.prop('disabled', false);
        $configSavingStatus.html('');
      });
    });
  });
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndvcmRwcmVzcy9hZG1pbi1jb25maWd1cmF0aW9uLmpzIl0sIm5hbWVzIjpbIiQiLCIkc3VibWl0Q29uZmlnIiwiJGNvbmZpZ1NhdmluZ1N0YXR1cyIsIiRjb25maWdJbXBvcnRTdGF0dXMiLCIkaW1wb3J0QmxvY2siLCIkZ2VuZXJhdGVUaGVtZSIsIiRjaGlsZFRoZW1lU3RhdHVzIiwiY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiLCIkdGhlbWVOYW1lIiwiJHRleHREb21haW4iLCIkdGhlbWVEZXNjIiwiJHRoZW1lVVJMIiwiJHRoZW1lVGFncyIsImRhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInZhbCIsIkZPVU5EQVRJT04iLCJub25jZSIsInByb3AiLCJyZW1vdmVDbGFzcyIsImh0bWwiLCJmZXRjaCIsImFqYXh1cmwiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImVycm9yIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJmb3JFYWNoIiwiZXJyb3JNc2ciLCJzdWNjZXNzIiwic3VjY2Vzc01zZyIsIiRjb25maWdEYXRhIiwicHJvcGVydHkiLCJ1cGRhdGVkIiwiYWRtaW5fdXJsIiwicmVtb3ZlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOztBQUFBLENBQUMsVUFBU0EsQ0FBVCxFQUFZO0FBQ1hBLEVBQUFBLENBQUMsQ0FBQyxZQUFNO0FBQ04sUUFBTUMsYUFBYSxHQUFTRCxDQUFDLENBQUUsZUFBRixDQUE3QjtBQUFBLFFBQ01FLG1CQUFtQixHQUFHRixDQUFDLENBQUUscUJBQUYsQ0FEN0I7QUFBQSxRQUVNRyxtQkFBbUIsR0FBR0gsQ0FBQyxDQUFFLHFCQUFGLENBRjdCO0FBQUEsUUFHTUksWUFBWSxHQUFVSixDQUFDLENBQUUsY0FBRixDQUg3QjtBQUFBLFFBSU1LLGNBQWMsR0FBUUwsQ0FBQyxDQUFFLHFCQUFGLENBSjdCO0FBQUEsUUFLTU0saUJBQWlCLEdBQUtOLENBQUMsQ0FBRSxtQkFBRixDQUw3QixDQURNLENB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QjtBQUNELE9BeEJEO0FBeUJELEtBeENEO0FBeUNELEdBL0dBLENBQUQ7QUFnSEQsQ0FqSEQsRUFpSEdvQixNQWpISCIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKSB7XG4gICQoKCkgPT4ge1xuICAgIGNvbnN0ICRzdWJtaXRDb25maWcgICAgICAgPSAkKCAnI2ltcG9ydENvbmZpZycgKSxcbiAgICAgICAgICAkY29uZmlnU2F2aW5nU3RhdHVzID0gJCggJyNjb25maWdTYXZpbmdTdGF0dXMnICksXG4gICAgICAgICAgJGNvbmZpZ0ltcG9ydFN0YXR1cyA9ICQoICcjY29uZmlnSW1wb3J0U3RhdHVzJyApLFxuICAgICAgICAgICRpbXBvcnRCbG9jayAgICAgICAgPSAkKCAnI2ltcG9ydEJsb2NrJyApLFxuICAgICAgICAgICRnZW5lcmF0ZVRoZW1lICAgICAgPSAkKCAnI2dlbmVyYXRlQ2hpbGRUaGVtZScgKSxcbiAgICAgICAgICAkY2hpbGRUaGVtZVN0YXR1cyAgID0gJCggJyNjaGlsZFRoZW1lU3RhdHVzJyApO1xuXG4gICAgLy8gR2VuZWFydGUgY2hpbGQgdGhlbWVcbiAgICAkZ2VuZXJhdGVUaGVtZS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0ICR0aGVtZU5hbWUgID0gJCggJyNjaGlsZFRoZW1lTmFtZScgKTtcbiAgICAgIGNvbnN0ICR0ZXh0RG9tYWluID0gJCggJyNjaGlsZFRoZW1lVGV4dERvbWFpbicgKTtcbiAgICAgIGNvbnN0ICR0aGVtZURlc2MgID0gJCggJyNjaGlsZFRoZW1lRGVzYycgKTtcbiAgICAgIGNvbnN0ICR0aGVtZVVSTCAgID0gJCggJyNjaGlsZFRoZW1lVVJMJyApO1xuICAgICAgY29uc3QgJHRoZW1lVGFncyAgPSAkKCAnI2NoaWxkVGhlbWVUYWdzJyApO1xuXG4gICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZGF0YS5hcHBlbmQoICdhY3Rpb24nLCAnZm91bmRhdGlvbl9nZW5lcmF0ZV90aGVtZScgKTtcbiAgICAgIGRhdGEuYXBwZW5kKCAndGhlbWVfbmFtZScsICR0aGVtZU5hbWUudmFsKCkgKTtcbiAgICAgIGRhdGEuYXBwZW5kKCAndGV4dF9kb21haW4nLCAkdGV4dERvbWFpbi52YWwoKSApO1xuICAgICAgZGF0YS5hcHBlbmQoICd0aGVtZV9kZXNjJywgJHRoZW1lRGVzYy52YWwoKSApO1xuICAgICAgZGF0YS5hcHBlbmQoICd0aGVtZV91cmwnLCAkdGhlbWVVUkwudmFsKCkgKTtcbiAgICAgIGRhdGEuYXBwZW5kKCAndGhlbWVfdGFncycsICR0aGVtZVRhZ3MudmFsKCkgKTtcbiAgICAgIGRhdGEuYXBwZW5kKCAnc2VjdXJpdHknLCBGT1VOREFUSU9OLm5vbmNlICk7XG5cbiAgICAgICR0aGVtZU5hbWUucHJvcCggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuICAgICAgJHRleHREb21haW4ucHJvcCggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuICAgICAgJHRoZW1lRGVzYy5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG4gICAgICAkdGhlbWVVUkwucHJvcCggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuICAgICAgJHRoZW1lVGFncy5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG4gICAgICAkZ2VuZXJhdGVUaGVtZS5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG5cbiAgICAgICRjaGlsZFRoZW1lU3RhdHVzXG4gICAgICAgIC5yZW1vdmVDbGFzcyggJ2Vycm9yJyApXG4gICAgICAgIC5yZW1vdmVDbGFzcyggJ3N1Y2Nlc3MnIClcbiAgICAgICAgLmh0bWwoJycpO1xuXG4gICAgICBmZXRjaCggYWpheHVybCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZGF0YVxuICAgICAgfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgJHRoZW1lTmFtZS5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuICAgICAgICAkdGV4dERvbWFpbi5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuICAgICAgICAkdGhlbWVEZXNjLnByb3AoICdkaXNhYmxlZCcsIGZhbHNlICk7XG4gICAgICAgICR0aGVtZVVSTC5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuICAgICAgICAkdGhlbWVUYWdzLnByb3AoICdkaXNhYmxlZCcsIGZhbHNlICk7XG4gICAgICAgICRnZW5lcmF0ZVRoZW1lLnByb3AoICdkaXNhYmxlZCcsIGZhbHNlICk7XG5cbiAgICAgICAgaWYgKCByZXNwb25zZS5lcnJvci5sZW5ndGggKSB7XG4gICAgICAgICAgJGNoaWxkVGhlbWVTdGF0dXMuYWRkQ2xhc3MoICdlcnJvcicgKTtcbiAgICAgICAgICByZXNwb25zZS5lcnJvci5mb3JFYWNoKGZ1bmN0aW9uKGVycm9yTXNnKSB7XG4gICAgICAgICAgICAkY2hpbGRUaGVtZVN0YXR1cy5hcHBlbmQoICc8cD48c3Ryb25nPicgKyBlcnJvck1zZyArICc8L3N0cm9uZz48L3A+JyApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYoIHJlc3BvbnNlLnN1Y2Nlc3MubGVuZ3RoICkge1xuICAgICAgICAgICRjaGlsZFRoZW1lU3RhdHVzLmFkZENsYXNzKCAnc3VjY2VzcycgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggcmVzcG9uc2Uuc3VjY2Vzcy5sZW5ndGggKSB7XG4gICAgICAgICAgcmVzcG9uc2Uuc3VjY2Vzcy5mb3JFYWNoKGZ1bmN0aW9uKHN1Y2Nlc3NNc2cpIHtcbiAgICAgICAgICAgICRjaGlsZFRoZW1lU3RhdHVzLmFwcGVuZCggJzxwPjxzdHJvbmc+JyArIHN1Y2Nlc3NNc2cgKyAnPC9zdHJvbmc+PC9wPicgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KTtcblxuICAgIC8vIEltcG9ydCBjb25maWd1cmF0aW9uXG4gICAgJHN1Ym1pdENvbmZpZy5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0ICRjb25maWdEYXRhID0gJCgnI2NvbmZpZ0RhdGEnKTtcblxuICAgICAgJHN1Ym1pdENvbmZpZy5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG4gICAgICAkY29uZmlnRGF0YS5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG4gICAgICAkY29uZmlnU2F2aW5nU3RhdHVzLmh0bWwoICdQbGVhc2Ugd2FpdCwgaW1wb3J0aW5nIGNvbmZpZ3VyYXRpb24uLi4nICk7XG4gICAgICAkY29uZmlnSW1wb3J0U3RhdHVzLmh0bWwoICcnICk7XG5cbiAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBkYXRhLmFwcGVuZCggJ2FjdGlvbicsICdmb3VuZGF0aW9uX2ltcG9ydF9jb25maWd1cmF0aW9uJyApO1xuICAgICAgZGF0YS5hcHBlbmQoICdkYXRhJywgJGNvbmZpZ0RhdGEudmFsKCkgKTtcbiAgICAgIGRhdGEuYXBwZW5kKCAnc2VjdXJpdHknLCBGT1VOREFUSU9OLm5vbmNlICk7XG5cbiAgICAgIGZldGNoKCBhamF4dXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBkYXRhXG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoIHJlc3BvbnNlLmVycm9yICkge1xuICAgICAgICAgIHN3aXRjaCggcmVzcG9uc2UuZXJyb3IgKSB7XG4gICAgICAgICAgICBjYXNlICdpbnZhbGlkX2RhdGEnOlxuICAgICAgICAgICAgICAkY29uZmlnSW1wb3J0U3RhdHVzLmh0bWwoICc8c3BhbiBzdHlsZT1cImNvbG9yOiNjYTRhMWY7Zm9udC13ZWlnaHQ6Ym9sZFwiPlRoZSBjb25maWd1cmF0aW9uIGNvZGUgZW50ZXJlZCBpcyBpbnZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLjwvc3Bhbj4nICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgcHJvcGVydHkgaW4gcmVzcG9uc2UudXBkYXRlZCkge1xuICAgICAgICAgICAgJGNvbmZpZ0ltcG9ydFN0YXR1cy5hcHBlbmQoICc8c3Ryb25nPicgKyByZXNwb25zZS51cGRhdGVkW3Byb3BlcnR5XSArICc8L3N0cm9uZz4gKCcgKyBwcm9wZXJ0eSArICcpIDxzcGFuIHN0eWxlPVwiY29sb3I6IzQ2YjQ1MFwiPlVwZGF0ZWQ8L3NwYW4+PGJyPicgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkY29uZmlnSW1wb3J0U3RhdHVzLmFwcGVuZCgnPGJyPjxhIGhyZWY9XCInICsgRk9VTkRBVElPTi5hZG1pbl91cmwgKyAnYWRtaW4ucGhwP3BhZ2U9Y29uZmlndXJhdGlvblwiPlJlZnJlc2g8L2E+IHRoZSBwYWdlIHRvIHZpZXcgdGhlIHVwZGF0ZXMuJyk7XG4gICAgICAgICAgJGltcG9ydEJsb2NrLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHN1Ym1pdENvbmZpZy5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuICAgICAgICAkY29uZmlnRGF0YS5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuICAgICAgICAkY29uZmlnU2F2aW5nU3RhdHVzLmh0bWwoICcnICk7XG4gICAgICB9KVxuICAgIH0pO1xuICB9KTtcbn0pKGpRdWVyeSk7XG4iXSwiZmlsZSI6IndvcmRwcmVzcy9hZG1pbi1jb25maWd1cmF0aW9uLmpzIn0=
